
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.9">
    
    
      
        <title>Espresso Extensions - Espresso Kotlin Playground</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.120efc48.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.9647289d.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#espresso-extensions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Espresso Kotlin Playground" class="md-header__button md-logo" aria-label="Espresso Kotlin Playground" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Espresso Kotlin Playground
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Espresso Extensions
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/plusmobileapps/espresso-kotlin-playground" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Espresso Kotlin Playground" class="md-nav__button md-logo" aria-label="Espresso Kotlin Playground" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Espresso Kotlin Playground
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/plusmobileapps/espresso-kotlin-playground" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../page-object-pattern/" class="md-nav__link">
        Page Object Pattern
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Espresso Extensions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Espresso Extensions
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#viewinteraction-extension" class="md-nav__link">
    ViewInteraction Extension
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#viewaction-extensions" class="md-nav__link">
    ViewAction Extensions
  </a>
  
    <nav class="md-nav" aria-label="ViewAction Extensions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#visibility" class="md-nav__link">
    Visibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#text-fields" class="md-nav__link">
    Text Fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clicking" class="md-nav__link">
    Clicking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-text" class="md-nav__link">
    Verify Text
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#androidxtestcore-ktx" class="md-nav__link">
    androidx.test:core-ktx
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-test" class="md-nav__link">
    Simple Test
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../navigation-dsl/" class="md-nav__link">
        Navigation DSL
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../mockk-test/" class="md-nav__link">
        Mockk Test
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../mock-ktor-test/" class="md-nav__link">
        Mock Ktor Test
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../integrate-with-api/" class="md-nav__link">
        Integrate With API
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../jetpack-compose/" class="md-nav__link">
        Jetpack Compose
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../google-maps/" class="md-nav__link">
        Google Maps
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#viewinteraction-extension" class="md-nav__link">
    ViewInteraction Extension
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#viewaction-extensions" class="md-nav__link">
    ViewAction Extensions
  </a>
  
    <nav class="md-nav" aria-label="ViewAction Extensions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#visibility" class="md-nav__link">
    Visibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#text-fields" class="md-nav__link">
    Text Fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clicking" class="md-nav__link">
    Clicking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-text" class="md-nav__link">
    Verify Text
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#androidxtestcore-ktx" class="md-nav__link">
    androidx.test:core-ktx
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-test" class="md-nav__link">
    Simple Test
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/plusmobileapps/espresso-kotlin-playground/edit/master/docs/espresso-extensions.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="espresso-extensions">Espresso Extensions</h1>
<p>Espresso was originally written in Java which can be verbose and makes heavy use of static functions which do not always show up as suggestions when trying to use code completion. Since these tests are written in Kotlin, <a href="https://kotlinlang.org/docs/extensions.html">extension functions</a> can be utilized to help improve the developer experience in writing expressive tests that provide helpful code completion. </p>
<h2 id="viewinteraction-extension">ViewInteraction Extension</h2>
<p>One of the most common ways to create a <a href="https://developer.android.com/reference/androidx/test/espresso/ViewInteraction"><code>ViewInteraction</code></a> with a <code>View</code> id is <code>onView(withId(R.id.some_id))</code>. To simplify this construction in page objects, an extension function can be added to the <code>BasePage</code> interface on an Int (resource id) which will return the <code>ViewInteraction</code>. </p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="nn">androidx.test.espresso.ViewInteraction</span>
<span class="k">import</span> <span class="nn">androidx.test.espresso.matcher.ViewMatchers.withId</span>

<span class="kd">interface</span> <span class="nc">BasePage</span> <span class="p">{</span>

    <span class="kd">fun</span> <span class="n">Int</span><span class="p">.</span><span class="nf">toViewInteraction</span><span class="p">():</span> <span class="n">ViewInteraction</span> <span class="o">=</span> 
        <span class="n">onView</span><span class="p">(</span><span class="n">withId</span><span class="p">(</span><span class="k">this</span><span class="p">))</span>

<span class="p">}</span>
</code></pre></div>
<p>Now the <code>LoginPage</code> can take advantage of the extension function for the implementation detail of the page objects. </p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">LoginPage</span> <span class="p">:</span> <span class="n">BasePage</span> <span class="p">{</span>

    <span class="kd">fun</span> <span class="nf">onEmail</span><span class="p">():</span> <span class="n">ViewInteraction</span> <span class="o">=</span> <span class="n">R</span><span class="p">.</span><span class="na">id</span><span class="p">.</span><span class="na">username</span><span class="p">.</span><span class="na">toViewInteraction</span><span class="p">()</span>
    <span class="kd">fun</span> <span class="nf">onPassword</span><span class="p">():</span> <span class="n">ViewInteraction</span> <span class="o">=</span> <span class="n">R</span><span class="p">.</span><span class="na">id</span><span class="p">.</span><span class="na">password</span><span class="p">.</span><span class="na">toViewInteraction</span><span class="p">()</span>
    <span class="kd">fun</span> <span class="nf">onSignInOrRegisterButton</span><span class="p">():</span> <span class="n">ViewInteraction</span> <span class="o">=</span> <span class="n">R</span><span class="p">.</span><span class="na">id</span><span class="p">.</span><span class="na">login</span><span class="p">.</span><span class="na">toViewInteraction</span><span class="p">()</span>

<span class="p">}</span>
</code></pre></div>
<h2 id="viewaction-extensions">ViewAction Extensions</h2>
<p>There are many of different types of actions that could be taken on a View, this series makes use of the following extension functions on a <code>ViewInteraction</code> in order to write more expressive tests. If you need a different type of action, the pattern should still apply simply creating an extension function on <code>ViewInteraction</code>. </p>
<h3 id="visibility">Visibility</h3>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span> <span class="n">ViewInteraction</span><span class="p">.</span><span class="nf">verifyVisible</span><span class="p">():</span> <span class="n">ViewInteraction</span> <span class="o">=</span> <span class="n">check</span><span class="p">(</span><span class="n">matches</span><span class="p">(</span><span class="n">isDisplayed</span><span class="p">()))</span>
</code></pre></div>
<p>The <code>assertScreen()</code> function in each page can be implemented using the visibility extension function. </p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">LoginUI</span> <span class="p">:</span> <span class="n">BaseUI</span> <span class="p">{</span>

    <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">assertScreen</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">onEmail</span><span class="p">().</span><span class="na">verifyVisible</span><span class="p">()</span>
        <span class="n">onPassword</span><span class="p">().</span><span class="na">verifyVisible</span><span class="p">()</span>
        <span class="n">onSignInOrRegisterButton</span><span class="p">().</span><span class="na">verifyVisible</span><span class="p">()</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<h3 id="text-fields">Text Fields</h3>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span> <span class="n">ViewInteraction</span><span class="p">.</span><span class="nf">typeText</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="kt">String</span><span class="p">):</span> <span class="n">ViewInteraction</span> <span class="o">=</span> <span class="n">perform</span><span class="p">(</span><span class="n">ViewActions</span><span class="p">.</span><span class="na">typeText</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>

<span class="kd">fun</span> <span class="n">ViewInteraction</span><span class="p">.</span><span class="nf">verifyTextFieldError</span><span class="p">(</span><span class="nd">@StringRes</span> <span class="n">resId</span><span class="p">:</span> <span class="kt">Int</span><span class="p">):</span> <span class="n">ViewInteraction</span> <span class="o">=</span>
    <span class="n">check</span><span class="p">(</span><span class="n">matches</span><span class="p">(</span><span class="n">hasErrorText</span><span class="p">(</span><span class="n">getString</span><span class="p">(</span><span class="n">resId</span><span class="p">))))</span>

<span class="c1">// Helper function for getting strings using application target context</span>
<span class="kd">fun</span> <span class="nf">getString</span><span class="p">(</span><span class="nd">@StringRes</span> <span class="n">resId</span><span class="p">:</span> <span class="kt">Int</span><span class="p">):</span> <span class="kt">String</span> <span class="o">=</span>
    <span class="n">InstrumentationRegistry</span><span class="p">.</span><span class="na">getInstrumentation</span><span class="p">().</span><span class="na">targetContext</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="n">resId</span><span class="p">)</span>
</code></pre></div>
<p>One sample usage might be for a test that verifies an error is shown on a password field if not enough characters were entered. </p>
<div class="highlight"><pre><span></span><code><span class="n">LoginPage</span><span class="p">().</span><span class="na">apply</span> <span class="p">{</span>
    <span class="n">onPassword</span><span class="p">().</span><span class="na">typeText</span><span class="p">(</span><span class="s">&quot;4344&quot;</span><span class="p">)</span>
    <span class="n">onEmail</span><span class="p">().</span><span class="na">typeText</span><span class="p">(</span><span class="s">&quot;andrew@test.com&quot;</span><span class="p">)</span>
    <span class="n">onPassword</span><span class="p">().</span><span class="na">verifyTextFieldError</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="na">string</span><span class="p">.</span><span class="na">invalid_password</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="clicking">Clicking</h3>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span> <span class="n">ViewInteraction</span><span class="p">.</span><span class="nf">click</span><span class="p">():</span> <span class="n">ViewInteraction</span> <span class="o">=</span> <span class="n">perform</span><span class="p">(</span><span class="n">ViewActions</span><span class="p">.</span><span class="na">click</span><span class="p">())</span>
</code></pre></div>
<p>Sample: </p>
<div class="highlight"><pre><span></span><code><span class="n">LoginPage</span><span class="p">().</span><span class="na">onSignInOrRegisterButton</span><span class="p">().</span><span class="na">click</span><span class="p">()</span>
</code></pre></div>
<h3 id="verify-text">Verify Text</h3>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span> <span class="n">ViewInteraction</span><span class="p">.</span><span class="nf">verifyText</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="kt">String</span><span class="p">):</span> <span class="n">ViewInteraction</span> <span class="o">=</span> <span class="n">check</span><span class="p">(</span><span class="n">matches</span><span class="p">(</span><span class="n">withText</span><span class="p">(</span><span class="n">text</span><span class="p">)))</span>
</code></pre></div>
<p>Sample: </p>
<div class="highlight"><pre><span></span><code><span class="n">LoggedInPage</span><span class="p">().</span><span class="na">onWelcomeGreeting</span><span class="p">().</span><span class="na">verifyText</span><span class="p">(</span><span class="s">&quot;Welcome Andrew!&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="androidxtestcore-ktx">androidx.test:core-ktx</h2>
<div class="highlight"><pre><span></span><code><span class="n">androidTestImplementation</span> <span class="s2">&quot;androidx.test:core-ktx:&lt;version&gt;&quot;</span>
</code></pre></div>
<p><a href="https://mvnrepository.com/artifact/androidx.test/core-ktx">Versions</a></p>
<p>Sample: </p>
<div class="highlight"><pre><span></span><code><span class="kd">val</span> <span class="nv">scenario</span> <span class="o">=</span> <span class="n">launchActivity</span><span class="o">&lt;</span><span class="n">LoginActivity</span><span class="o">&gt;</span><span class="p">()</span>
</code></pre></div>
<h2 id="simple-test">Simple Test</h2>
<p>Now that all of the page objects are implemented, the last login test can be simplified further using the new extension functions. </p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span> 
<span class="kd">fun</span> <span class="nf">successfulLogin</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="nv">scenario</span> <span class="o">=</span> <span class="n">launchActivity</span><span class="o">&lt;</span><span class="n">LoginActivity</span><span class="o">&gt;</span><span class="p">()</span>

    <span class="n">LoginPage</span><span class="p">().</span><span class="na">apply</span> <span class="p">{</span>
        <span class="n">onEmail</span><span class="p">().</span><span class="na">typeText</span><span class="p">(</span><span class="s">&quot;andrew@test.com&quot;</span><span class="p">)</span>
        <span class="n">onPassword</span><span class="p">().</span><span class="na">typeText</span><span class="p">(</span><span class="s">&quot;password123&quot;</span><span class="p">)</span>
        <span class="n">onSignInOrRegisterButton</span><span class="p">().</span><span class="na">click</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="n">LoggedInPage</span><span class="p">().</span><span class="na">onWelcomeGreeting</span><span class="p">().</span><span class="na">verifyText</span><span class="p">(</span><span class="s">&quot;Welcome Andrew!&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>The test is starting to look better, however each page has to be instantiated and there is no link between pages when writing tests. Thankfully Kotlin has features that will be covered in the next section to create a navigation DSL. </p>
<h2 id="resources">Resources</h2>
<ul>
<li>Source code<ul>
<li><a href="https://github.com/plusmobileapps/espresso-kotlin-playground/commit/51aaf7fa633369000d8735a5255ccbed4e423f7b">Github commit</a></li>
<li><a href="https://github.com/plusmobileapps/espresso-kotlin-playground/tree/3-espresso-extensions"><code>3-espresso-extensions</code> - GitHub Branch</a></li>
</ul>
</li>
</ul>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../page-object-pattern/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Page Object Pattern" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Page Object Pattern
            </div>
          </div>
        </a>
      
      
        
        <a href="../navigation-dsl/" class="md-footer__link md-footer__link--next" aria-label="Next: Navigation DSL" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Navigation DSL
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections"], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6e54b5cd.min.js"></script>
      
    
  </body>
</html>